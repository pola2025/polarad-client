# PRD: μλ£μ μ¶ νμΌ μ—…λ΅λ“ μ‹μ¤ν…

## κ°μ”

ν΄λΌμ΄μ–ΈνΈ μλ£μ μ¶ μ‹μ¤ν…μ„ URL μ…λ ¥ λ°©μ‹μ—μ„ νμΌ μ§μ ‘ μ—…λ΅λ“ λ°©μ‹μΌλ΅ λ³€κ²½ν•©λ‹λ‹¤.
λ―Όκ°μ •λ³΄(μ‹ λ¶„μ¦, ν†µμ¥μ‚¬λ³Έ, μ‚¬μ—…μλ“±λ΅μ¦)λ” μ„λ²„μ— μ €μ¥ν•μ§€ μ•κ³  μ¬λ™μΌλ΅ μ§μ ‘ μ „μ†΅ν•©λ‹λ‹¤.

## ν„μ¬ μƒνƒ

### μ™„λ£λ μ‘μ—…

| ν•­λ© | νμΌ | μƒνƒ |
|------|------|------|
| μ¬λ™ ν΄λΌμ΄μ–ΈνΈ | `lib/slack/index.ts` | β… μ™„λ£ |
| ν•κΈ€β†’λ΅λ§μ λ³€ν™ | `lib/utils/koreanToRoman.ts` | β… μ™„λ£ |
| R2 μ—…λ΅λ“ + WebP μ••μ¶• | `lib/r2.ts` | β… μ™„λ£ |
| νμΌ μ—…λ΅λ“ API | `app/api/upload/route.ts` | β… μ™„λ£ |
| Submissions API | `app/api/submissions/route.ts` | β… μ™„λ£ |
| Submissions νμ΄μ§€ UI | `app/(dashboard)/dashboard/submissions/page.tsx` | β… μ™„λ£ |
| ν¨ν‚¤μ§€ μ¶”κ°€ | `package.json` (@slack/web-api, sharp) | β… μ™„λ£ |
| λΉλ“ ν…μ¤νΈ | `npm run build` | β… μ™„λ£ |
| μ„¤μ • κ°€μ΄λ“ | `docs/setup-guide.html` | β… μ™„λ£ |

### λ‚¨μ€ μ‘μ—… (λ°°ν¬ μ „)

1. **R2 λ²„ν‚· μƒμ„±** - Cloudflare Dashboardμ—μ„ `polarad-client-files` λ²„ν‚· μƒμ„±
2. **ν™κ²½λ³€μ μ„¤μ •** - Vercel Dashboardμ—μ„ ν™κ²½λ³€μ μ¶”κ°€
3. **λ°°ν¬** - `git push origin main`
4. **ν…μ¤νΈ** - ν”„λ΅λ•μ…μ—μ„ νμΌ μ—…λ΅λ“ ν…μ¤νΈ

> π“– **μ„¤μ • κ°€μ΄λ“**: `docs/setup-guide.html`μ„ λΈλΌμ°μ €μ—μ„ μ—΄μ–΄ λ‹¨κ³„λ³„ μ•λ‚΄λ¥Ό ν™•μΈν•μ„Έμ”.

---

## ν™κ²½λ³€μ μ„¤μ • (ν•„μ)

Vercel Dashboard β†’ Settings β†’ Environment Variablesμ— μ¶”κ°€:

```env
# Slack (F:\startpackage\.env μ°Έκ³ )
SLACK_BOT_TOKEN=xoxb-xxx...
SLACK_ADMIN_EMAILS=mkt@polarad.co.kr,imagine20002@gmail.com

# Cloudflare R2 (F:\startpackage\.env μ°Έκ³ )
R2_ENDPOINT=https://xxx.r2.cloudflarestorage.com
R2_ACCESS_KEY_ID=xxx
R2_SECRET_ACCESS_KEY=xxx
R2_BUCKET_NAME=polarad-client-files
R2_PUBLIC_URL=https://pub-xxxxx.r2.dev
```

**μ£Όμ**: R2_PUBLIC_URLμ€ μƒ λ²„ν‚· μƒμ„± ν›„ Public URL ν™•μΈ ν•„μ”

---

## μ‹μ¤ν… κµ¬μ΅°

### νμΌ μ—…λ΅λ“ ν”λ΅μ°

```
[ν΄λΌμ΄μ–ΈνΈ] β†’ [/api/upload] β†’ νμΌ νƒ€μ… ν™•μΈ
                                    β†“
                    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                    β†“                               β†“
            [λ―Όκ°μ •λ³΄ νμΌ]                   [μΌλ° νμΌ]
                    β†“                               β†“
            WebP μ••μ¶•                         WebP μ••μ¶•
                    β†“                               β†“
            μ¬λ™ μ§μ ‘ μ „μ†΅                    R2 μ—…λ΅λ“
            (μ„λ²„ λ―Έμ €μ¥)                          β†“
                    β†“                         μ¬λ™μ—λ„ κ³µμ 
            μ‘λ‹µ: { isSensitive: true }            β†“
                                            μ‘λ‹µ: { publicUrl }
```

### λ―Όκ°μ •λ³΄ νμΌ μΆ…λ¥

- `businessLicense` - μ‚¬μ—…μλ“±λ΅μ¦
- `idCard` - μ‹ λ¶„μ¦
- `bankBook` - ν†µμ¥μ‚¬λ³Έ

### μ¬λ™ μ±„λ„ μƒμ„± κ·μΉ™

- μ±„λ„λ…: `polarad-YYYYMMDD-ν΄λΌμ΄μ–ΈνΈλ…(λ΅λ§μ)`
- μ: `polarad-20251210-pollaseilseu`
- κ΄€λ¦¬μ μλ™ μ΄λ€ (SLACK_ADMIN_EMAILS)

---

## ν…μ¤νΈ μ²΄ν¬λ¦¬μ¤νΈ

### 1. νμΌ μ—…λ΅λ“ ν…μ¤νΈ

- [ ] μ΄λ―Έμ§€ νμΌ μ—…λ΅λ“ β†’ WebP μ••μ¶• ν™•μΈ
- [ ] PDF νμΌ μ—…λ΅λ“ β†’ μ›λ³Έ μ μ§€ ν™•μΈ
- [ ] 10MB μ΄κ³Ό νμΌ β†’ μ—λ¬ λ©”μ‹μ§€ ν™•μΈ
- [ ] ν—μ©λμ§€ μ•λ” νμΌ ν•μ‹ β†’ μ—λ¬ λ©”μ‹μ§€ ν™•μΈ

### 2. λ―Όκ°μ •λ³΄ ν…μ¤νΈ

- [ ] μ‚¬μ—…μλ“±λ΅μ¦ μ—…λ΅λ“ β†’ μ¬λ™ μ „μ†΅ ν™•μΈ
- [ ] μ‹ λ¶„μ¦ μ—…λ΅λ“ β†’ μ¬λ™ μ „μ†΅ ν™•μΈ
- [ ] ν†µμ¥μ‚¬λ³Έ μ—…λ΅λ“ β†’ μ¬λ™ μ „μ†΅ ν™•μΈ
- [ ] R2μ— μ €μ¥λμ§€ μ•μ ν™•μΈ

### 3. μ¬λ™ μ—°λ™ ν…μ¤νΈ

- [ ] μ²« μ μ¶ μ‹ μ±„λ„ μƒμ„± ν™•μΈ
- [ ] κ΄€λ¦¬μ μ΄λ€ ν™•μΈ
- [ ] μ μ¶ μ •λ³΄ λ©”μ‹μ§€ μ „μ†΅ ν™•μΈ
- [ ] ν”„λ΅ν•„ μ‚¬μ§„ νμΌ κ³µμ  ν™•μΈ

### 4. μ „μ²΄ ν”λ΅μ° ν…μ¤νΈ

- [ ] νμ›κ°€μ… β†’ λ΅κ·ΈμΈ β†’ μλ£μ μ¶ β†’ μ¬λ™ ν™•μΈ

---

## μ•λ ¤μ§„ μ΄μ

### 1. λ―Όκ°μ •λ³΄ μ—…λ΅λ“ μμ„ λ¬Έμ 

**λ¬Έμ **: λ―Όκ°μ •λ³΄ νμΌ μ—…λ΅λ“ μ‹ μ¬λ™ μ±„λ„μ΄ μ•„μ§ μƒμ„±λμ§€ μ•μ€ μƒνƒμΌ μ μμ

**ν„μ¬ λ™μ‘**: "μ¬λ™ μ±„λ„μ΄ μƒμ„±λμ§€ μ•μ•μµλ‹λ‹¤" μ—λ¬ λ°ν™

**ν•΄κ²° λ°©μ• (μ„ νƒ)**:
1. λ―Όκ°μ •λ³΄λ” μ μ¶ μ™„λ£ μ‹μ μ— μΌκ΄„ μ „μ†΅
2. μ„μ‹ μ±„λ„ μƒμ„± ν›„ λ―Όκ°μ •λ³΄ μ—…λ΅λ“ ν—μ©
3. ν„μ¬ λ™μ‘ μ μ§€ (μ μ¶ ν›„ λ―Όκ°μ •λ³΄ μ¬μ—…λ΅λ“)

### 2. R2 λ²„ν‚· μ„¤μ •

- μƒ λ²„ν‚· `polarad-client-files` μƒμ„± ν•„μ”
- Public Access μ„¤μ • ν•„μ”
- CORS μ„¤μ • ν•„μ” (ν΄λΌμ΄μ–ΈνΈ μ§μ ‘ μ—…λ΅λ“ μ‹)

---

## λ‹¤μ μ„Έμ… μ‘μ—… μμ„

1. **ν™κ²½λ³€μ μ„¤μ •**
   - Vercelμ— μ„ ν™κ²½λ³€μ μ¶”κ°€
   - R2 λ²„ν‚· μƒμ„± λ° μ„¤μ •

2. **λΉλ“ ν…μ¤νΈ**
   ```bash
   npm run build
   ```

3. **Push λ° λ°°ν¬**
   ```bash
   git push origin main
   ```

4. **ν…μ¤νΈ**
   - ν”„λ΅λ•μ…μ—μ„ μλ£μ μ¶ ν…μ¤νΈ
   - μ¬λ™ μ±„λ„ λ° νμΌ ν™•μΈ

5. **λ²„κ·Έ μμ •** (λ°μƒ μ‹)

---

## μ°Έκ³  νμΌ

- startpackage μ¬λ™ ν΄λΌμ΄μ–ΈνΈ: `F:\startpackage\lib\notification\slackClient.ts`
- startpackage ν™κ²½λ³€μ: `F:\startpackage\.env`
